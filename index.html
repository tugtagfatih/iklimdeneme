<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ã‡evre Ayak Ä°zi HesaplayÄ±cÄ±</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* SayfanÄ±n temel stil ayarlarÄ± */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background-color: #ffffff;
            padding: 20px 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
        }

        /* Sekme ButonlarÄ± */
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab-button {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background-color: transparent;
            font-size: 1.1em;
            color: #7f8c8d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-button:hover {
            color: #3498db;
        }

        .tab-button.active {
            color: #2980b9;
            border-bottom: 3px solid #2980b9;
        }

        /* HesaplayÄ±cÄ± Ä°Ã§erikleri */
        .calculator {
            display: none; /* BaÅŸlangÄ±Ã§ta hepsi gizli */
        }

        .calculator.active {
            display: block; /* Sadece aktif olan gÃ¶rÃ¼nÃ¼r */
        }
        
        /* Form elemanlarÄ± iÃ§in genel stil */
        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        input[type="number"], input[type="text"] {
            width: 100px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* padding'in geniÅŸliÄŸi etkilememesi iÃ§in */
        }
        
        /* Karbon ayak izi anket stilleri */
        .question-block {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }
        .question-block p {
            font-weight: bold;
            margin: 0 0 10px 0;
        }
        .question-block label {
            font-weight: normal;
            display: block;
            margin-bottom: 5px;
        }

        /* Buton stili */
        button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #229954;
        }

        /* SonuÃ§ AlanlarÄ± */
        #waterResult, #carbonResult {
            margin-top: 25px;
            padding: 15px;
            border-radius: 5px;
            background-color: #ecf0f1;
            text-align: center;
        }

        .chart-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 20px;
            margin-top: 20px;
        }
        
        .chart-box {
            width: 100%;
            max-width: 350px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸŒ Ã‡evre Ayak Ä°zi HesaplayÄ±cÄ±</h1>

        <div class="tabs">
            <button class="tab-button active" onclick="showCalculator('water')">ğŸ’§ Su Ayak Ä°zi</button>
            <button class="tab-button" onclick="showCalculator('carbon')">ğŸ’¨ Karbon Ayak Ä°zi</button>
        </div>

        <div id="waterCalculator" class="calculator active">
            <form id="waterForm">
                <p>LÃ¼tfen aÅŸaÄŸÄ±daki sorularÄ± gÃ¼nlÃ¼k tÃ¼ketim miktarlarÄ±nÄ±za gÃ¶re cevaplayÄ±nÄ±z.</p>
                </form>
            <button type="button" onclick="calculateWaterFootprint()">Hesapla</button>
            <div id="waterResult" style="display:none;">
                <p id="waterTotalText"></p>
                <p id="waterAdviceText"></p>
                <div class="chart-container">
                    <div class="chart-box">
                        <canvas id="categoryChart"></canvas>
                    </div>
                    <div class="chart-box">
                        <canvas id="waterTypeChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div id="carbonCalculator" class="calculator">
            <form id="carbonForm">
                <p>LÃ¼tfen aÅŸaÄŸÄ±daki 10 soruyu cevaplayÄ±n.</p>
                </form>
            <button type="button" onclick="calculateCarbonFootprint()">Hesapla</button>
            <div id="carbonResult" style="display:none;">
                 </div>
        </div>
    </div>

<script>
// ---------- Genel Fonksiyonlar ----------

// Sayfa ilk yÃ¼klendiÄŸinde hesaplayÄ±cÄ±larÄ± hazÄ±rlayan fonksiyon
document.addEventListener('DOMContentLoaded', () => {
    populateWaterQuestions();
    populateCarbonQuestions();
});

// Sekmeler arasÄ± geÃ§iÅŸ fonksiyonu
function showCalculator(type) {
    // TÃ¼m sekmeleri ve iÃ§erikleri gizle
    document.getElementById('waterCalculator').classList.remove('active');
    document.getElementById('carbonCalculator').classList.remove('active');
    document.querySelector('.tab-button[onclick*="water"]').classList.remove('active');
    document.querySelector('.tab-button[onclick*="carbon"]').classList.remove('active');

    // Ä°stenen sekmeyi ve iÃ§eriÄŸi gÃ¶ster
    document.getElementById(type + 'Calculator').classList.add('active');
    document.querySelector(`.tab-button[onclick*="${type}"]`).classList.add('active');
}


// ---------- Su Ayak Ä°zi BÃ¶lÃ¼mÃ¼ ----------

const water_questions = [
    { text: "1) GÃ¼nde kaÃ§ litre iÃ§me suyu tÃ¼ketiyorsunuz?", factor: 0.001, water_type: "blue", category: "household" },
    { text: "2) GÃ¼nde kaÃ§ dakika duÅŸ alÄ±yorsunuz?", factor: 0.0095, water_type: "blue", category: "household" },
    { text: "3) GÃ¼nde kaÃ§ kez sifon Ã§ekiyorsunuz?", factor: 0.006, water_type: "gray", category: "household" },
    { text: "4) GÃ¼nde kaÃ§ kilogram Ã§amaÅŸÄ±r yÄ±kÄ±yorsunuz?", factor: 0.015, water_type: "blue", category: "household" },
    { text: "5) GÃ¼nde kaÃ§ kez bulaÅŸÄ±k yÄ±kÄ±yorsunuz (elde/makinede)?", factor: 0.01, water_type: "gray", category: "household" },
    { text: "6) GÃ¼nde kaÃ§ fincan Ã§ay/kahve iÃ§iyorsunuz?", factor: 0.05, water_type: "green", category: "food" },
    { text: "7) GÃ¼nde kaÃ§ kilogram et tÃ¼ketiyorsunuz?", factor: 15.0, water_type: "green", category: "food" },
    { text: "8) GÃ¼nde kaÃ§ kilogram sÃ¼t Ã¼rÃ¼nÃ¼ tÃ¼ketiyorsunuz?", factor: 1.0, water_type: "green", category: "food" },
    { text: "9) GÃ¼nde kaÃ§ kilogram meyve tÃ¼ketiyorsunuz?", factor: 0.9, water_type: "green", category: "food" },
    { text: "10) GÃ¼nde kaÃ§ kilogram sebze tÃ¼ketiyorsunuz?", factor: 0.2, water_type: "green", category: "food" },
    { text: "11) GÃ¼nde kaÃ§ kilogram ekmek/tahÄ±l tÃ¼ketiyorsunuz?", factor: 1.3, water_type: "green", category: "food" },
    { text: "12) GÃ¼nde kaÃ§ adet yumurta tÃ¼ketiyorsunuz?", factor: 0.2, water_type: "green", category: "food" },
    { text: "13) GÃ¼nde kaÃ§ litre paketli iÃ§ecek (kola vb.) tÃ¼ketiyorsunuz?", factor: 0.002, water_type: "gray", category: "others" },
    { text: "14) GÃ¼nde kaÃ§ litre bahÃ§e/saksÄ± sulama suyu kullanÄ±yorsunuz?", factor: 0.001, water_type: "blue", category: "others" },
    { text: "15) GÃ¼nde kaÃ§ kilometre Ã¶zel aracÄ±nÄ±zÄ± kullanÄ±yorsunuz?", factor: 0.0007, water_type: "gray", category: "others" },
    { text: "16) GÃ¼nde kaÃ§ kilometre toplu taÅŸÄ±ma kullanÄ±yorsunuz?", factor: 0.0002, water_type: "gray", category: "others" },
    { text: "17) Ayda kaÃ§ adet giysi/ayakkabÄ± satÄ±n alÄ±yorsunuz? (LÃ¼tfen aylÄ±k adedi girin)", factor: 0.1, water_type: "green", category: "others" },
    { text: "18) GÃ¼nde kaÃ§ saat elektronik cihaz (bilgisayar, TV vb.) kullanÄ±yorsunuz?", factor: 0.001, water_type: "gray", category: "others" },
    { text: "19) GÃ¼nde kaÃ§ sayfa kaÄŸÄ±t kullanÄ±yorsunuz?", factor: 0.005, water_type: "gray", category: "others" },
    { text: "20) GÃ¼nde kaÃ§ kilogram gÄ±da israf ediyorsunuz?", factor: 1.0, water_type: "gray", category: "food" },
    { text: "21) GÃ¼nde kaÃ§ litre temizlik malzemesi (deterjan vb.) kullanÄ±yorsunuz?", factor: 0.001, water_type: "gray", category: "household" },
    { text: "22) GÃ¼nde kaÃ§ litre bitkisel sÃ¼t (soya, badem vb.) tÃ¼ketiyorsunuz?", factor: 0.2, water_type: "blue", category: "food" },
    { text: "23) GÃ¼nde kaÃ§ saat klimalÄ±/Ä±sÄ±tmalÄ± odalarda vakit geÃ§iriyorsunuz?", factor: 0.0004, water_type: "gray", category: "household" },
    { text: "24) GÃ¼nde kaÃ§ adet plastik ÅŸiÅŸe kullanÄ±yorsunuz?", factor: 0.003, water_type: "gray", category: "others" },
    { text: "25) GÃ¼nde kaÃ§ adet atÄ±ÅŸtÄ±rmalÄ±k paketi (cips vb.) tÃ¼ketiyorsunuz?", factor: 0.15, water_type: "gray", category: "food" }
];

let categoryChartInstance = null;
let waterTypeChartInstance = null;

function populateWaterQuestions() {
    const form = document.getElementById('waterForm');
    water_questions.forEach((q, index) => {
        const id = `water_q${index + 1}`;
        const formGroup = document.createElement('div');
        formGroup.className = 'form-group';
        formGroup.innerHTML = `
            <label for="${id}">${q.text}</label>
            <input type="number" id="${id}" name="${id}" min="0" step="any" placeholder="0">
        `;
        form.appendChild(formGroup);
    });
}

function calculateWaterFootprint() {
    const footprint = {
        household: 0.0, food: 0.0, others: 0.0,
        blue: 0.0, green: 0.0, gray: 0.0
    };

    water_questions.forEach((q, index) => {
        const id = `water_q${index + 1}`;
        const answer = parseFloat(document.getElementById(id).value) || 0.0;
        const value_m3 = answer * q.factor;
        footprint[q.category] += value_m3;
        footprint[q.water_type] += value_m3;
    });

    // Python'daki total_footprint hesaplamasÄ± iki kere saydÄ±ÄŸÄ± iÃ§in hatalÄ±.
    // DoÄŸrusu ya kategori ya da su tipine gÃ¶re toplamaktÄ±r. Ä°kisi de aynÄ± sonucu verir.
    const total_footprint = footprint.household + footprint.food + footprint.others;

    document.getElementById('waterTotalText').innerText = `ğŸ’§ GÃ¼nlÃ¼k toplam su ayak iziniz: ${total_footprint.toFixed(3)} mÂ³ (yani ${ (total_footprint * 1000).toFixed(0) } Litre)`;
    
    let advice = '';
    if (total_footprint < 2) {
        advice = "Harika! Su ayak iziniz oldukÃ§a dÃ¼ÅŸÃ¼k. ğŸ‘ BilinÃ§li su tÃ¼ketiminiz sayesinde doÄŸaya daha az yÃ¼k oluyorsunuz.";
    } else if (total_footprint < 4) {
        advice = "Normal. Su ayak iziniz dÃ¼nya ortalamasÄ±na yakÄ±n. Yine de su tasarrufuna ve israfÄ± Ã¶nlemeye dikkat etmeye devam edin. ğŸ‘";
    } else {
        advice = "YÃ¼ksek! Su ayak iziniz ortalamanÄ±n Ã¼zerinde. ğŸ˜Ÿ<br><b>Ã–neriler:</b><br>- Et tÃ¼ketimini azaltÄ±p sebze ve bakliyat aÄŸÄ±rlÄ±klÄ± beslenebilirsiniz.<br>- AlÄ±ÅŸveriÅŸinizi planlayarak gÄ±da israfÄ±nÄ± Ã¶nleyebilirsiniz.<br>- Su tasarruflu duÅŸ baÅŸlÄ±klarÄ±, sifonlar ve ev aletleri kullanabilirsiniz.<br>- Tek kullanÄ±mlÄ±k plastik ve kaÄŸÄ±t tÃ¼ketimini azaltmaya Ã§alÄ±ÅŸabilirsiniz.";
    }
    document.getElementById('waterAdviceText').innerHTML = advice;
    
    drawWaterCharts(footprint);
    document.getElementById('waterResult').style.display = 'block';
}

function drawWaterCharts(footprint) {
    const categoryCtx = document.getElementById('categoryChart').getContext('2d');
    const waterTypeCtx = document.getElementById('waterTypeChart').getContext('2d');

    if (categoryChartInstance) {
        categoryChartInstance.destroy();
    }
    if (waterTypeChartInstance) {
        waterTypeChartInstance.destroy();
    }

    categoryChartInstance = new Chart(categoryCtx, {
        type: 'bar',
        data: {
            labels: ['Evsel', 'GÄ±da', 'DiÄŸer'],
            datasets: [{
                label: 'Kategoriye GÃ¶re TÃ¼ketim (mÂ³)',
                data: [footprint.household, footprint.food, footprint.others],
                backgroundColor: ['#3498db', '#2ecc71', '#95a5a6']
            }]
        },
        options: {
            responsive: true,
            plugins: { legend: { display: false } },
            scales: { y: { beginAtZero: true, title: { display: true, text: 'mÂ³/gÃ¼n' } } },
            plugins: { title: { display: true, text: 'Kategoriye GÃ¶re Ayak Ä°zi' } }
        }
    });

    waterTypeChartInstance = new Chart(waterTypeCtx, {
        type: 'bar',
        data: {
            labels: ['Mavi Su', 'YeÅŸil Su', 'Gri Su'],
            datasets: [{
                label: 'Su Tipine GÃ¶re TÃ¼ketim (mÂ³)',
                data: [footprint.blue, footprint.green, footprint.gray],
                backgroundColor: ['#3498db', '#2ecc71', '#95a5a6']
            }]
        },
        options: {
            responsive: true,
            plugins: { legend: { display: false } },
            scales: { y: { beginAtZero: true, title: { display: true, text: 'mÂ³/gÃ¼n' } } },
            plugins: { title: { display: true, text: 'Su Tipine GÃ¶re Ayak Ä°zi' } }
        }
    });
}


// ---------- Karbon Ayak Ä°zi BÃ¶lÃ¼mÃ¼ ----------

const carbon_questions = [
    { soru: "1. GÃ¼nlÃ¼k ulaÅŸÄ±m tercihiniz nedir?", secenekler: { a: ["YÃ¼rÃ¼yÃ¼ÅŸ / Bisiklet", 0], b: ["Toplu taÅŸÄ±ma", 2], c: ["Ã–zel araÃ§", 4] } },
    { soru: "2. Haftada kaÃ§ gÃ¼n et tÃ¼ketirsiniz?", secenekler: { a: ["HiÃ§", 0], b: ["1-3 gÃ¼n", 2], c: ["4 gÃ¼n ve Ã¼zeri", 4] } },
    { soru: "3. Evinizde enerji tasarruflu ampuller kullanÄ±yor musunuz?", secenekler: { a: ["Evet", 0], b: ["BazÄ±larÄ±", 2], c: ["HayÄ±r", 4] } },
    { soru: "4. Geri dÃ¶nÃ¼ÅŸÃ¼m yapÄ±yor musunuz?", secenekler: { a: ["Evet, dÃ¼zenli olarak", 0], b: ["Ara sÄ±ra", 2], c: ["HiÃ§", 4] } },
    { soru: "5. Tatil iÃ§in yÄ±lda kaÃ§ kez uÃ§aÄŸa biniyorsunuz?", secenekler: { a: ["HiÃ§", 0], b: ["1-2 kez", 3], c: ["3 kez ve Ã¼zeri", 5] } },
    { soru: "6. Evinizde enerji verimli cihazlar kullanÄ±yor musunuz (A++ vb)?", secenekler: { a: ["Evet", 0], b: ["BazÄ±larÄ±", 2], c: ["HayÄ±r", 4] } },
    { soru: "7. Su tasarrufu saÄŸlamak iÃ§in Ã¶nlem alÄ±yor musunuz?", secenekler: { a: ["Evet", 0], b: ["Bazen", 2], c: ["HayÄ±r", 4] } },
    { soru: "8. Elektronik cihazlarÄ± kullanÄ±lmadÄ±ÄŸÄ±nda kapatÄ±yor musunuz?", secenekler: { a: ["Evet", 0], b: ["Bazen", 2], c: ["HayÄ±r", 4] } },
    { soru: "9. Ä°kinci el Ã¼rÃ¼nler alÄ±r mÄ±sÄ±nÄ±z?", secenekler: { a: ["Evet, sÄ±k sÄ±k", 0], b: ["Ara sÄ±ra", 2], c: ["HayÄ±r", 4] } },
    { soru: "10. Plastik kullanÄ±mÄ±nÄ± azaltmak iÃ§in Ã§aba harcar mÄ±sÄ±nÄ±z?", secenekler: { a: ["Evet", 0], b: ["Bazen", 2], c: ["HayÄ±r", 4] } }
];

function populateCarbonQuestions() {
    const form = document.getElementById('carbonForm');
    carbon_questions.forEach((q, index) => {
        const q_name = `carbon_q${index + 1}`;
        let optionsHTML = '';
        for (const [key, value] of Object.entries(q.secenekler)) {
            const [text, score] = value;
            optionsHTML += `
                <label>
                    <input type="radio" name="${q_name}" value="${score}" required> ${text}
                </label>
            `;
        }
        const questionBlock = document.createElement('div');
        questionBlock.className = 'question-block';
        questionBlock.innerHTML = `<p>${q.soru}</p>${optionsHTML}`;
        form.appendChild(questionBlock);
    });
}

function calculateCarbonFootprint() {
    const form = document.getElementById('carbonForm');
    if (!form.checkValidity()) {
        alert("LÃ¼tfen tÃ¼m sorularÄ± cevaplayÄ±nÄ±z.");
        return;
    }

    let score = 0;
    for (let i = 1; i <= carbon_questions.length; i++) {
        const q_name = `carbon_q${i}`;
        const selectedOption = document.querySelector(`input[name="${q_name}"]:checked`);
        if (selectedOption) {
            score += parseInt(selectedOption.value);
        }
    }

    const resultDiv = document.getElementById('carbonResult');
    let resultHTML = "<h3>ğŸ” Karbon Ayak Ä°zi Sonucunuz</h3>";

    if (score <= 10) {
        resultHTML += "<p>âœ… Tebrikler! Karbon ayak iziniz oldukÃ§a dÃ¼ÅŸÃ¼k. Bu ÅŸekilde devam edin!</p>";
    } else if (score <= 25) {
        resultHTML += "<p>âš ï¸ Orta seviyede bir karbon ayak iziniz var. BazÄ± alÄ±ÅŸkanlÄ±klarÄ±nÄ±zÄ± gÃ¶zden geÃ§irebilirsiniz.</p>";
        resultHTML += "<p><b>Ã–neriler:</b><br>- Daha az et tÃ¼ketin<br>- UlaÅŸÄ±mda toplu taÅŸÄ±maya yÃ¶nelin<br>- Enerji tasarruflu cihazlar kullanÄ±n</p>";
    } else {
        resultHTML += "<p>âŒ Karbon ayak iziniz yÃ¼ksek! Daha sÃ¼rdÃ¼rÃ¼lebilir bir yaÅŸam tarzÄ± benimsemelisiniz.</p>";
        resultHTML += "<p><b>Ã–neriler:</b><br>- UÃ§ak yolculuklarÄ±nÄ± azaltÄ±n<br>- Et ve sÃ¼t tÃ¼ketimini sÄ±nÄ±rlayÄ±n<br>- Geri dÃ¶nÃ¼ÅŸÃ¼me Ã¶nem verin<br>- Yenilenebilir enerji kullanmaya Ã§alÄ±ÅŸÄ±n</p>";
    }
    
    resultDiv.innerHTML = resultHTML;
    resultDiv.style.display = 'block';
}

</script>

</body>
</html>
